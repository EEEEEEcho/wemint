<view class="container">
    <view class="money-box border1px">
        <view class="money-box-title">支付金额</view>
        <view class="money-box-num">{{totalMoney}}</view>
    </view>
    <view catchtap="getCouponsList" class="discounts-msg">
        <label class="label">优惠券</label>
        <view class="msg">
            <text class="discount-name">{{couponTitleText.Title?couponTitleText.Title:'请选择'}}</text>
            <text class="iconfont icon-iconfont_arrow-right"></text>
        </view>
    </view>
    <view class="payment-title">
        <text>支付方式</text>
    </view>
    <view class="way-box">
        <view bindtap="onPayWayChange" class="balance-way border1px" data-val="3">
            <view class="balance-way-left {{balanceflagNum?'colorChange':''}}">
                <text class="iconfont icon-yue"></text>
                <text class="balance-title">余额支付</text>
                <text class="balance-money">（{{balanceNumber==0?'':'￥'}}{{balanceNumber==0?'余额不足':balanceNumber}}）</text>
            </view>
            <view class="coupon-radio-ctnr">
                <radio checked="{{payway==3}}" class="radioItem" color="#f33a63" type="radio" value="3"></radio>
                <icon class="iconText" color="{{payway==3?'#f33a63':'#ddd'}}" size="26" type="{{payway==3?'success':'circle'}}"></icon>
            </view>
        </view>
        <view bindtap="onPayWayChange" class="wechat-way" data-val="1" wx:if="{{wxPay}}">
            <view class="wechat-way-left">
                <text class="iconfont icon-weixinzhifu"></text>
                <text class="wechat-title">微信支付</text>
            </view>
            <view class="coupon-radio-ctnr">
                <radio checked="{{payway==1}}" class="radioItem" color="#f33a63" type="radio" value="1"></radio>
                <icon class="iconText" color="{{payway==1?'#f33a63':'#ddd'}}" size="26" type="{{payway==1?'success':'circle'}}"></icon>
            </view>
        </view>
    </view>
    <button catchtap="{{canBeat?'pay':''}}" class="btn">支付{{payMoney}}</button>
    <view class="couponinfo-plug" wx:if="{{couponinfoFlag}}">
        <view bindtap="showCouponinfoPlug" class="couponinfo-plugBg"></view>
        <view class="couponinfo-plug-content">
            <view class="couponinfo-topHeader">
                <text>优惠券</text>
                <text bindtap="showCouponinfoPlug" class="iconfont closePlug icon-guanbi-copy"></text>
            </view>
            <scroll-view scrollY style="height: 744rpx;">
                <radio-group name="CouponID" wx:if="{{couponList.length>0}}">
                    <label bindtap="onCouponChange" class="coupon-item border1px" data-amount="0" data-idx="-1" data-itemid="0" data-type="0">
                        <view class="coupon-info-ctnr">
                            <view class="coupon-title" style="font-size: 28rpx;">不使用优惠券</view>
                        </view>
                        <view class="coupon-radio-ctnr">
                            <radio checked="{{couponTitleText.ItemID===-1}}" class="radioItem" color="#ff7200" type="radio" value="0"></radio>
                            <icon class="iconText" color="{{couponTitleText.ItemID===-1?'#ff7200':'#ddd'}}" size="20" type="{{couponTitleText.ItemID===-1?'success':'circle'}}"></icon>
                        </view>
                    </label>
                    <label bindtap="{{!item.canUse?'canNoChoose':'onCouponChange'}}" class="coupon-item border1px" data-amount="{{item.Amount}}" data-idx="{{idx}}" data-itemid="{{item.ItemID}}" data-type="{{item.Type}}" wx:for="{{couponList}}" wx:for-index="idx" wx:key="ItemID">
                        <view class="couponinfoItemLeft">
                            <view class="numText {{!item.canUse?'canNoUse':''}}">
                                <text>{{item.Type==='0'?item.Amount/10:item.Amount}} {{item.Type==='0'?'折':'元'}}</text>
                                <text style="display:inline-block;margin-left:50rpx">{{item.Type==='0'?'折扣券':'现金券'}}</text>
                            </view>
                            <view class="coupon-info-ctnr {{!item.canUse?'canNoUse':''}}">
                                <view class="coupon-title">{{item.OrderMoney==='0'?'无限制使用':'消费满'+item.OrderMoney+'元可使用'}}</view>
                                <view class="coupon-expire">过期时间：{{item.ExTime}}</view>
                            </view>
                        </view>
                        <view class="coupon-radio-ctnr">
                            <radio checked="{{couponTitleText.ItemID===item.ItemID}}" class="radioItem" color="#ff7200" type="radio" value="{{item.ItemID}}"></radio>
                            <icon class="iconText" color="{{couponTitleText.ItemID===item.ItemID?'#ff7200':'#ddd'}}" size="20" type="{{couponTitleText.ItemID===item.ItemID?'success':'circle'}}"></icon>
                        </view>
                    </label>
                </radio-group>
                <view class="couponGetOver" wx:if="{{couponList.length==0}}">
                    <image mode="widthFix" src="{{baseUrl}}/images/wxapp/blank_10.png"></image>
                    <text>没有可用的优惠劵</text>
                </view>
            </scroll-view>
        </view>
    </view>
</view>
