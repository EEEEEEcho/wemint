<navigate bindonManage="onManage" cartLeftText="{{cartLeftText}}" cartLength="{{cartList.length!=0}}" cartPage="{{cartPage}}"></navigate>
<view class="cart-container" style="margin-top: {{navH+status+10}}px;" wx:if="{{isLogin}}">
    <view class="production_panel {{cartIndex===cartList.length-1?'last-panel':''}}" wx:for="{{cartList}}" wx:for-index="cartIndex" wx:for-item="cart">
        <view class="panel_header">
            <view class="shop">
                <image class="shop_img" lazyLoad="true" mode="aspectFill" src="{{cart.logo}}"></image>
                <text class="shop_name">{{cart.name}}</text>
            </view>
            <text bindtap="toShop" class="shop_coupon" data-shop-uuid="{{cart.shopUuid}}">进店</text>
        </view>
        <view class="product_list">
            <view class="product" wx:for="{{cart.goods}}" wx:for-index="goodIndex">
                <view catchtap="goodCheck" class="check-img" data-cart-index="{{cartIndex}}" data-good-index="{{goodIndex}}">
                    <image class="oval_img" lazyLoad="true" src="{{item.isChecked?'http://oss.shangmian.xin/weixin_applets_cart_oval_fill.png':'http://oss.shangmian.xin/weixin_applets_cart_oval.png'}}"></image>
                </view>
                <image bindtap="toGoodDetail" class="product-img" data-goods-uuid="{{item.goodsUuid}}" lazyLoad="true" mode="aspectFill" src="{{item.goodsCovers[0]}}"></image>
                <view bindtap="toGoodDetail" class="pro" data-goods-uuid="{{item.goodsUuid}}">
                    <text class="pro_name">{{item.title}}</text>
                    <view class="params" wx:if="{{index<1}}" wx:for="{{item.skuProperties}}" wx:for-item="properties">
                        <text class="pro_color">{{properties.name}}</text>
                        <view class="param">
                            <text class="pro_param">{{cartFilter.getProperty(properties)}}</text>
                        </view>
                    </view>
                    <view class="pro_price">
                        <view class="price">
                            <text class="new_price_pre">¥</text>
                            <text class="new_price">{{item.salesPrice/100}}</text>
                            <text class="deposit" wx:if="{{item.payType==2}}">定金付款</text>
                        </view>
                        <view class="numLayout row">
                            <view catchtap="numMinus" class="minusLayout row" data-cart-index="{{cartIndex}}" data-good-index="{{goodIndex}}">
                                <image class="minus" src="{{item.num==1?'http://oss.shangmian.xin/weixin_applets_cart_minus.png':'http://oss.shangmian.xin/weixin_applets_cart_minus_black.png'}}"></image>
                            </view>
                            <view class="centerNumLayout row">
                                <text class="centerNum">{{item.num}}</text>
                            </view>
                            <view catchtap="numAdd" class="addLayout row" data-cart-index="{{cartIndex}}" data-good-index="{{goodIndex}}">
                                <image class="add" src="http://oss.shangmian.xin/weixin_applets_cart_add.png"></image>
                            </view>
                        </view>
                    </view>
                </view>
            </view>
        </view>
    </view>
    <empty iconPath="http://oss.shangmian.xin/weixin_applets_icon_good_empty_view.png" isShow="{{cartList.length==0}}" textContent="购物车暂时没有商品"></empty>
    <view class="acount" wx:if="{{cartList.length!=0}}">
        <view bindtap="allCheck" class="checked">
            <image class="checked-img" src="{{isCheckAll?'http://oss.shangmian.xin/weixin_applets_cart_oval_fill.png':'http://oss.shangmian.xin/weixin_applets_cart_oval.png'}}"></image>
            <text class="checked-txt">全选</text>
        </view>
        <view class="summary">
            <text class="summary-txt">合计:</text>
            <text class="summary-pre">¥</text>
            <text class="summary-price">{{summary}}</text>
        </view>
        <text bindtap="toPayment" class="summary-btn" style="background: {{submitText=='结算'?isCheck?'#ed7b43':'#aeaeb4':'#51515c'}}">{{submitText}}</text>
    </view>
</view>
<view bindtap="toLogin" class="loginLayout" style="margin-top: {{navH+status+10}}px;" wx:if="{{!isLogin}}">
    <image class="loginImage" lazyLoad="true" mode="widthFix" src="http://oss.shangmian.xin/weixin_applets_icon_empty_view.png"></image>
    <text class="loginText">点击登录查看购物车商品</text>
</view>
<loading-view isShow="{{isShowLoad}}"></loading-view>
<wxs module="cartFilter" src="cart.wxs" />